# üß† Memory & Context

## üìä Current System Status
- **File-based data storage**: Implemented complete solution for multiprocessing memory sharing using `/app/data/shared/` directory
- **Ranking table display**: Fixed "Îç∞Ïù¥ÌÑ∞ Ï≤òÎ¶¨ ÎåÄÍ∏∞ Ï§ë" issue - now shows actual ranking data
- **Multiprocessing compatibility**: Process-to-process data sharing via file system instead of memory
- **Refresh button functionality**: Fixed AttributeError when df_with_rankings is None, now works in all states
- **Async chart calculation**: Implemented to eliminate continuous calculations triggered by root endpoint
- **Visual status indicators**: Loading icons (‚öôÔ∏è) for in-progress, error icons (‚ùå) for failed calculations
- **Manual refresh system**: No auto-polling, users manually refresh to check progress
- **No caching**: All HTML content generated fresh on each request for immediate status updates
- **Multi-frontier regression methodology**: Successfully implemented and fully operational
- **Chart visualization**: Advanced charts now calculated asynchronously in background
- **API response time**: Immediate response from /process endpoint, charts calculated separately
- **Default method**: Changed to `fixed_rates` for consistent coefficient calculation
- **Feature coefficient calculation**: Successfully includes voice_unlimited and message_unlimited in regression analysis
- **Chart data format**: Fixed JavaScript functions to handle nested cost structure objects properly
- **Marginal Cost Frontier Charts**: Successfully implemented feature-level trend visualization using pure marginal costs from multi-frontier regression
- **‚úÖ PIECEWISE LINEAR MODEL IMPLEMENTED**: Replaced simple linear model with realistic piecewise segments showing economies of scale
- **‚úÖ MONOTONIC FILTERING APPLIED**: Same robust monotonic frontier logic with 1 KRW/feature rule as original system
- **‚úÖ UNLIMITED HANDLING COMPLETE**: Separate processing of unlimited plans with proper endpoints
- **‚úÖ UNLIMITED AS FLAGS ONLY**: Unlimited features processed as boolean flags, not continuous data points in marginal cost trendlines
- **‚úÖ DOUBLE FILTERING FIXED**: Eliminated double filtering - monotonicity applied only to trendline, not raw market data
- **‚úÖ FULL DATASET ANALYSIS IMPLEMENTED**: Switched from frontier points to entire dataset regression for comprehensive analysis
- **‚úÖ 5G FEATURE ADDED**: Added is_5g to core_continuous_features for complete feature coverage
- **‚úÖ LINEAR DECOMPOSITION COMPLETELY REMOVED**: Removed all Linear Decomposition Analysis sections, functions, and references
- **‚úÖ CUMULATIVE COST CALCULATION FIXED**: Charts now plot cumulative costs instead of fixed marginal rates
- **‚úÖ PIECEWISE SEGMENTS PROPERLY IMPLEMENTED**: Using fit_cumulative_piecewise_linear for realistic cost accumulation
- **‚úÖ MULTI-FEATURE FRONTIER REGRESSION ANALYSIS REMOVED**: Deleted entire section from HTML and related calculation code per user request
- **‚úÖ FIXED RATES METHOD IMPLEMENTED**: New ranking calculation using pure coefficients for entire dataset without filtering
- **‚úÖ UNLIMITED FLAGS IN REGRESSION**: voice_unlimited and message_unlimited now properly included in Feature Marginal Cost Coefficients table
- **‚úÖ MULTICOLLINEARITY ISSUE RESOLVED**: Removed problematic features from coefficient calculation pipeline ('data_stops_after_quota' and other highly correlated features), switched from Ridge to LinearRegression, enforced positive coefficient bounds for key features
- **‚úÖ ENHANCED COEFFICIENT TABLE**: Added unconstrained (raw OLS) vs constrained (bounded) coefficient comparison with color-coded adjustments
- **‚úÖ ASYNC PROCESSING SEQUENCE VERIFIED**: Response returned immediately after ranking calculation, validation and charts run in background only
- **‚úÖ DETAILED CALCULATION FORMULAS**: HTML coefficient table now shows exact mathematical steps including multicollinearity redistribution formulas
- **F-string backslash error fixed**: HTML JavaScript code in f-string was using backslashes directly, moved to variable for proper syntax
- **‚úÖ MULTIPROCESSING MEMORY SHARING SOLVED**: Implemented file-based data storage system to replace global variable sharing
- **‚úÖ FILE-BASED STORAGE ARCHITECTURE**: Created data_storage.py module with save/load functions for DataFrame and cost structure
- **‚úÖ PROCESS-TO-PROCESS DATA SHARING**: Uses file system (/app/data/shared/) for reliable data exchange between FastAPI processes
- **Process endpoint**: ‚úÖ Working correctly - returns 1000+ ranked plans with CS ratios (JSON response successful) + saves to files
- **Root endpoint**: ‚úÖ Fixed - loads data from files instead of relying on global variables
- **‚úÖ ERROR LOG ANALYSIS COMPLETE**: 500+ line error.log contains only 1 actual error (empty data processing) and 500+ normal HF Space keep-alive polling logs
- **‚úÖ ENDPOINT LOGIC ANALYSIS COMPLETE**: Detailed code flow understanding for both / and /process endpoints for system documentation
- **‚úÖ PERFORMANCE OPTIMIZATION COMPLETE**: /processÏóêÏÑú Îû≠ÌÇπ Í≥ÑÏÇ∞ Ï¶âÏãú ÏôÑÎ£å ÌõÑ ÏùëÎãµ, Ï∞®Ìä∏Îäî Î∞±Í∑∏ÎùºÏö¥ÎìúÏóêÏÑú ÎπÑÎèôÍ∏∞ Í≥ÑÏÇ∞
- **‚úÖ BACKGROUND CHART CALCULATION**: Charts calculated asynchronously after response, saved to files when complete
- **‚úÖ FILE-BASED BACKGROUND SHARING**: Background tasks use file storage for data persistence and sharing
- **‚úÖ ALWAYS LATEST FILE ACCESS**: / endpoint always loads most recent files, never caches, always shows current data
- **‚úÖ DOCKER DIRECTORY SETUP**: Added /app/data/shared directory creation in Dockerfile for storage reliability

## üéØ Key Achievements
- **Cross-contamination problem solved**: Marginal Cost Frontier Charts show pure feature trends without contamination
- **Feature-level visualization**: Charts display how pure marginal costs vary across different feature levels
- **Data integration**: Successfully combines multi-frontier regression coefficients with feature-level trend analysis
- **Chart rendering**: All chart types (traditional frontier, marginal cost frontier) working correctly
- **‚úÖ PIECEWISE IMPLEMENTATION**: Real economies of scale reflected in marginal cost trends with automatic change point detection
- **‚úÖ REFACTORING PROPOSAL FULLY IMPLEMENTED**: All key mathematical concepts from refactoring_proposal.md now working in production
- **‚úÖ QUALITY ASSURANCE**: Same filtering standards as original frontier charts (monotonicity + 1KRW rule)
- **‚úÖ DATA INTEGRITY**: Proper unlimited plan handling with separate endpoints
- **‚úÖ CLEAN TRENDLINES**: Unlimited features stored as flags, not mixed into continuous marginal cost calculations
- **‚úÖ CONSISTENT DATA POINTS**: Traditional and marginal frontier charts now show same number of actual market plans
- **‚úÖ COMPREHENSIVE DATASET USAGE**: Full dataset regression provides more accurate coefficients than frontier-only analysis
- **‚úÖ COMPLETE FEATURE COVERAGE**: All 5 core features (data, voice, messages, tethering, 5G) now analyzed
- **‚úÖ UI SIMPLIFICATION**: Both Linear Decomposition Analysis and Multi-Feature Frontier Regression Analysis sections removed for cleaner interface
- **‚úÖ PROPER COST ACCUMULATION**: Charts show cumulative costs building up through piecewise segments
- **‚úÖ REALISTIC MARGINAL COST STRUCTURE**: Piecewise segments displayed in coefficient table instead of fixed rates
- **‚úÖ FIXED RATES RANKING**: Ranking table now uses pure marginal coefficients from entire dataset for CS calculation
- **‚úÖ COMPREHENSIVE COEFFICIENT INVESTIGATION**: Systematic analysis of negative coefficient causes completed with definitive root cause identification
- **‚úÖ COEFFICIENT COMPARISON ENHANCEMENT**: Feature coefficient table now shows both unconstrained (raw) and constrained (bounded) values with difference calculation
- **‚úÖ MATHEMATICAL TRANSPARENCY**: Coefficient table displays exact calculation steps including multicollinearity redistribution with formulas like "(70.2 + 49.8) / 2 = 60.0"
- **‚úÖ MULTIPROCESSING ARCHITECTURE SOLVED**: File-based storage eliminates global variable sharing issues in FastAPI multiprocessing environment

## üîå Endpoint Architecture
**/ endpoint (Root HTML Interface)**:
- **Purpose**: Visual interface for users to view processed rankings and charts
- **Data Source**: Loads from files using data_storage.load_rankings_data() instead of global variables
- **Content**: Complete HTML report with ranking table, charts, and feature coefficient table
- **Chart Status**: Shows individual loading states for each chart section if still calculating
- **Response**: Always returns HTML (immediate, never blocks for calculations)
- **File Dependencies**: rankings.json, cost_structure.json, metadata.json in /app/data/shared/

**/process endpoint (Data Processing API)**:
- **Purpose**: Processes raw mobile plan data and calculates rankings using Cost-Spec analysis
- **Input**: JSON array of mobile plan data
- **Processing**: Preprocessing ‚Üí Feature extraction ‚Üí Coefficient calculation ‚Üí Ranking ‚Üí Store results
- **File Storage**: Saves results to /app/data/shared/ directory using data_storage.save_rankings_data()
- **Chart Calculation**: Triggers background async chart calculations (non-blocking)
- **Response**: Immediate JSON with ranked plans and CS ratios
- **Side Effect**: Populates file-based storage for / endpoint to display

**Testing Workflow**: `/process` for data processing ‚Üí `/` for visual verification of results
**Development Pattern**: Use `/process` endpoint for testing core functionality, check HTML results via `/` endpoint

## üîß Technical Implementation
- **File-based storage**: data_storage.py module handles save/load operations for DataFrame and cost structure
- **Storage location**: /app/data/shared/ directory with rankings.json, cost_structure.json, metadata.json
- **Multiprocessing compatibility**: File system provides reliable inter-process communication
- **Data preparation**: `prepare_granular_marginal_cost_frontier_data()` function uses entire dataset for regression analysis
- **Chart creation**: `createMarginalCostFrontierCharts()` JavaScript function renders interactive charts with full dataset results
- **HTML integration**: Marginal Cost Frontier Analysis section displays comprehensive analysis results
- **Method detection**: System uses FullDatasetMultiFeatureRegression for more accurate coefficient extraction
- **‚úÖ FULL DATASET ALGORITHMS**: Uses entire dataset instead of frontier points for regression analysis
- **‚úÖ REALISTIC MARGINAL COSTS**: Variable marginal costs across feature ranges with comprehensive market data
- **‚úÖ FRONTIER CONSISTENCY**: Maintains quality filtering while using full dataset for coefficient calculation
- **‚úÖ UNLIMITED PROCESSING**: Separate handling of unlimited plans with proper categorical treatment
- **‚úÖ FLAG-BASED UNLIMITED**: Unlimited features stored separately from continuous analysis
- **‚úÖ COMPREHENSIVE FILTERING**: Uses entire dataset for analysis while maintaining data quality standards
- **‚úÖ CLEAN CODEBASE**: All Linear Decomposition and Multi-Feature Regression functions and references removed from codebase
- **‚úÖ CUMULATIVE PIECEWISE CALCULATION**: Uses fit_cumulative_piecewise_linear for proper cost accumulation
- **‚úÖ CHART Y-AXIS FIX**: Charts plot cumulative_cost instead of marginal_cost for proper visualization
- **‚úÖ FIXED RATES CS CALCULATION**: New method calculates CS ratios using pure coefficients without frontier filtering
- **‚úÖ DATA PIPELINE ANALYSIS**: Comprehensive investigation framework for diagnosing coefficient calculation issues
- **‚úÖ COEFFICIENT ENHANCEMENT**: `generate_feature_rates_table_html()` function shows unconstrained vs constrained coefficients with color-coded adjustment indicators
- **‚úÖ FILE-BASED DATA SHARING**: Eliminates global variable dependencies and multiprocessing memory sharing issues

## üö® Current Issues
- **None currently**: File-based storage system resolved all major multiprocessing memory sharing issues

## üìù Feature Enhancement Details
- **File storage structure**: JSON format for DataFrame serialization with metadata preservation
- **Error handling**: Graceful degradation when files don't exist (returns None)
- **Backward compatibility**: Maintains config module storage alongside file storage during transition
- **Debug capabilities**: Enhanced debug-global endpoint shows both file and config storage status
- **Unconstrained coefficients**: Raw OLS regression results without bounds constraints
- **Constrained coefficients**: Final values after applying economic bounds (non-negative, minimum values)
- **Adjustment display**: Green for upward adjustments, red for downward adjustments, gray for minimal changes
- **Comparison format**: Side-by-side table with separate columns for before/after values and difference

## üîç Information Sources
- **User feedback**: Request for coefficient table with both raw and adjusted values for comparison
- **Code enhancement**: Modified `_solve_constrained_regression()` to store unconstrained coefficients
- **UI improvement**: Enhanced `generate_feature_rates_table_html()` with expanded table format
- **Architecture decision**: User preference for file-based storage over multithreading conversion
- **Problem diagnosis**: Identified multiprocessing as root cause of global variable sharing issues

## üìà Chart Types Available
1. **Traditional Feature Frontier Charts**: Market-based trends (with contamination)
2. **Marginal Cost Frontier Charts**: Full dataset coefficient-based trends (contamination-free) ‚≠ê NOW USING CUMULATIVE PIECEWISE COSTS
3. **Plan Efficiency Charts**: Value ratio analysis

## üé® User Experience
- **Clear explanations**: Each chart section includes Korean explanations of methodology and interpretation
- **Visual distinction**: Blue lines for cumulative cost trends, red points for market comparison
- **Responsive design**: Charts adapt to different screen sizes and data volumes
- **Interactive features**: Hover tooltips and zoom capabilities for detailed analysis
- **Manual refresh system**: No auto-polling, users manually refresh to check progress using refresh button
- **‚úÖ REFRESH BUTTON**: Added üîÑ ÏÉàÎ°úÍ≥†Ïπ® button in header for manual page refresh to load latest data
- **‚úÖ FULL DATASET VISUALIZATION**: Charts show comprehensive analysis results from entire dataset
- **‚úÖ COMPLETE FEATURE SET**: All 5 core features visualized including 5G support
- **‚úÖ SIMPLIFIED INTERFACE**: Both Linear Decomposition Analysis and Multi-Feature Frontier Regression Analysis removed for better focus
- **‚úÖ PROPER COST VISUALIZATION**: Charts show realistic cumulative cost accumulation
- **‚úÖ PIECEWISE SEGMENT DISPLAY**: Coefficient table shows segment ranges instead of fixed rates
- **‚úÖ CLEAN RANKING TABLE**: Ranking now uses pure fixed rates from entire dataset analysis
- **‚úÖ RELIABLE DATA DISPLAY**: File-based storage ensures consistent ranking table display across all processes

## üéØ User Requirements & Preferences
- **File-based storage preferred**: User chose file-based solution over multithreading conversion for multiprocessing memory sharing
- **No auto-refresh**: Manual refresh only, no constant polling
- **Visual feedback**: Clear status indicators for chart calculation progress
- **Immediate API response**: /process endpoint returns instantly, charts calculated separately
- **Fresh content**: No caching, all content generated on-demand
- **Comprehensive analysis**: Marginal cost frontier analysis using entire dataset
- **No Linear Decomposition**: Linear Decomposition Analysis section completely removed per user request
- **No Multi-Feature Frontier**: Multi-Feature Frontier Regression Analysis section completely removed per user request
- **5G Feature Inclusion**: 5G support feature added to analysis scope
- **Entire Dataset Usage**: Full dataset regression instead of frontier-only analysis
- **Cumulative Cost Visualization**: Charts show proper cost accumulation, not fixed rates
- **Piecewise Segment Structure**: Coefficient table displays segment ranges with varying rates
- **Fixed Rates Ranking**: Ranking table uses pure marginal coefficients for entire dataset
- **Root cause investigation**: User prefers thorough analysis of underlying issues rather than quick workarounds

## üîß Technical Implementation Details
- **File-based architecture**: data_storage.py module with save_rankings_data() and load_rankings_data() functions
- **Storage format**: JSON serialization of pandas DataFrame with metadata preservation
- **Inter-process communication**: File system provides reliable data sharing between FastAPI processes
- **Error resilience**: Graceful handling of missing files with fallback to None values
- **Infinite loop fix**: Added safety counters and division-by-zero checks in `prepare_feature_frontier_data`
- **Logging optimization**: Reduced verbose logging to prevent SSH polling spam
- **Chart data handling**: JavaScript functions handle full dataset analysis results
- **Background processing**: Chart calculations run asynchronously without blocking API responses
- **Full dataset regression**: FullDatasetMultiFeatureRegression provides comprehensive coefficient analysis
- **Code cleanup**: All Linear Decomposition and Multi-Feature Frontier Regression functions and references removed from codebase
- **Cumulative cost calculation**: Fixed chart plotting to use cumulative_cost instead of marginal_cost
- **Piecewise segment implementation**: Using fit_cumulative_piecewise_linear for realistic cost accumulation
- **Fixed rates method**: New 'fixed_rates' method in calculate_cs_ratio_enhanced using FullDatasetMultiFeatureRegression
- **Data preprocessing pipeline**: Raw data requires preprocessing via prepare_features() to create expected feature columns

## üéØ Working Methods
- **File-based data persistence**: Eliminates multiprocessing memory sharing issues through file system storage
- **Fixed rates regression**: Uses FullDatasetMultiFeatureRegression for pure coefficient extraction on entire dataset
- **Feature frontier charts**: Original logic maintained as requested
- **Safety measures**: Infinite loop prevention implemented and working
- **Numpy type conversion**: Comprehensive serialization fix for all data types
- **Async processing**: Chart calculations run in background, API responds immediately
- **Cumulative piecewise calculation**: Proper cost accumulation through segments
- **Investigation methodology**: Systematic analysis of data pipeline issues using parallel comparisons

## üîß Implementation Patterns
- **File-based storage pattern**: Save on process, load on display - eliminates global variable dependencies
- **Async chart calculation**: Background tasks for expensive visualizations
- **Progressive status display**: Real-time progress indicators for chart generation
- **Fallback mechanisms**: Basic HTML reports when charts fail or are in progress
- **Method integration**: Fixed rates methods integrated into existing cost_spec.py structure
- **Error handling**: Robust type conversion and safety measures
- **Testing workflow**: Using raw data files from /data/raw/ directory
- **Clean server startup**: Direct uvicorn command in Dockerfile, log monitoring via app.py startup event
- **Root cause analysis**: Comprehensive investigation of technical issues before implementing solutions

## üìà Data Flow
- Raw data ‚Üí Fixed rates multi-feature regression ‚Üí CS ratio calculation ‚Üí **File storage** ‚Üí Immediate API response
- Background: Chart generation ‚Üí HTML report with visualizations ‚Üí Cache update
- **File-based persistence**: Process endpoint saves to files, root endpoint loads from files
- Feature analysis for each core feature (data, voice, messages, tethering, 5G)
- Comprehensive dataset utilization for accurate coefficient extraction without filtering
- Cross-contamination eliminated through full dataset regression approach using entire dataset
- Cumulative cost calculation through piecewise segments for realistic visualization
- Pure coefficient calculation for ranking table using fixed marginal rates
- **Critical**: Raw data requires preprocessing to create expected feature columns before coefficient calculation
- **Multiprocessing compatible**: File system provides reliable inter-process data sharing

## ÏãúÏä§ÌÖú Ï†ïÎ≥¥
- Ïö¥ÏòÅÏ≤¥Ï†ú: Linux 5.10.237-230.949.amzn2.x86_64
- ÏõåÌÅ¨Ïä§ÌéòÏù¥Ïä§: vscode-remote://ssh-remote%2Bssh.hf.space.mvno/app
- Ïâò: /bin/sh

## Marginal Calculation ÏàòÌïôÏ†Å ÏõêÎ¶¨ ‚≠ê Î™ÖÌôïÌôî ÏôÑÎ£å
- **ÌîÑÎ°†Ìã∞Ïñ¥ Î™©Ï†Å**: Ìä∏Î†åÎìú ÌïôÏäµÏö©, Í∞Å feature Î†àÎ≤®ÏóêÏÑú ÏµúÏ†ÄÍ∞ÄÎßå ÏÑ†ÌÉùÌïòÏó¨ overpriced ÏöîÍ∏àÏ†ú Ï†úÍ±∞
- **Íµ¨Í∞ÑÎ≥Ñ beta**: Í∑úÎ™®Ïùò Í≤ΩÏ†ú Î∞òÏòÅ (Ï≤´ 1GB ‚â† 100GBÏóêÏÑú 1GB)
- **ÏÉÅÌò∏ÏûëÏö© Ï†úÏô∏**: Î≥µÏû°ÏÑ± Î∞©ÏßÄ, Ìï¥ÏÑù Í∞ÄÎä•ÏÑ± Ïú†ÏßÄ
- **ÌïµÏã¨ Î¨∏Ï†ú Î∞úÍ≤¨**: ÌîÑÎ°†Ìã∞Ïñ¥ Ìè¨Ïù∏Ìä∏ Í∞ÄÍ≤©Ïóê Îã§Î•∏ featureÎì§ Í∞ÄÏπòÍ∞Ä ÌòºÏû¨Îê®
- **Ìï¥Í≤∞Ï±Ö**: Îã§Ï§ë Feature ÎèôÏãú ÌöåÍ∑Ä (ÌîÑÎ°†Ìã∞Ïñ¥ ÏÑ†ÌÉù + Ï†ÑÏ≤¥ Îã§Ï§ë ÌöåÍ∑Ä)
- **Í∞úÏÑ† Î∞©Ìñ•**: ÏàúÏàòÌïú Í∞Å featureÏùò ÎèÖÎ¶ΩÏ†Å Í∞ÄÏπò Ï∂îÏ†ï
- **Ï∂îÏ≤ú Î∞©Î≤ï**: Í∏∞Ïö∏Í∏∞ Î≥ÄÌôîÏ†ê Í∏∞Î∞ò Íµ¨Í∞Ñ ÏÑ§Ï†ï + 1KRW/feature Ï†úÏïΩ Ïú†ÏßÄ
- **Ïã§Ìñâ Í≥ÑÌöç**: 4Îã®Í≥Ñ Ï†êÏßÑÏ†Å Í∞úÏÑ† (Í∏∞Ï°¥ ÏãúÏä§ÌÖú Î≥¥Ï°¥ÌïòÎ©¥ÏÑú ÏÉà Î∞©Î≤ï Ï∂îÍ∞Ä)
- **‚úÖ ÎàÑÏ†Å ÎπÑÏö© Í≥ÑÏÇ∞**: Íµ¨Í∞ÑÎ≥Ñ ÌïúÍ≥ÑÎπÑÏö©ÏùÑ ÎàÑÏ†ÅÌïòÏó¨ Ïã§Ï†ú Ï¥ù ÎπÑÏö© Ìä∏Î†åÎìú ÏãúÍ∞ÅÌôî
- **‚úÖ Íµ¨Í∞ÑÎ≥Ñ Î≥ÄÌôî**: Í≥†Ï†ï ÏöîÏú® ÎåÄÏã† Íµ¨Í∞ÑÎ≥ÑÎ°ú Îã§Î•∏ ÌïúÍ≥ÑÎπÑÏö© Ï†ÅÏö©
- **‚úÖ Í≥†Ï†ï ÏöîÏú® Îû≠ÌÇπ**: Ï†ÑÏ≤¥ Îç∞Ïù¥ÌÑ∞ÏÖãÏóêÏÑú ÏàúÏàò ÌïúÍ≥ÑÎπÑÏö© Í≥ÑÏàòÎ•º ÏÇ¨Ïö©Ìïú Îû≠ÌÇπ ÌÖåÏù¥Î∏î

## Hugging Face Dev Mode ÌôòÍ≤Ω ‚≠ê Ï§ëÏöî
- **ÌòÑÏû¨ ÌôòÍ≤Ω**: Hugging Face SpaceÏóêÏÑú Dev Mode ÌôúÏÑ±Ìôî ÏÉÅÌÉú
- **ÏÑúÎ≤Ñ ÏÉÅÌÉú**: localhost:7860ÏóêÏÑú ÏÉÅÏãú Ïã§Ìñâ Ï§ë (Ï†àÎåÄ Ï¢ÖÎ£å Í∏àÏßÄ)
- **Î°úÍ∑∏ Î™®ÎãàÌÑ∞ÎßÅ**: simple_log_monitor.sh Ïä§ÌÅ¨Î¶ΩÌä∏ Ï†ïÏÉÅ ÏûëÎèô Ï§ë
- **ÏûêÎèôÌôî ÏôÑÎ£å**: Dockerfile ÏàòÏ†ïÏúºÎ°ú ÏÑúÎ≤Ñ ÏãúÏûë ÌõÑ Î°úÍ∑∏ Î™®ÎãàÌÑ∞ÎßÅ ÏûêÎèô Ïã§Ìñâ
- **Ïâò Ìò∏ÌôòÏÑ±**: sh Ïâò ÏÇ¨Ïö©ÏúºÎ°ú Docker ÌôòÍ≤Ω Ìò∏ÌôòÏÑ± ÌôïÎ≥¥
- **Ïã§Ìñâ ÏàúÏÑú**: ÏÑúÎ≤Ñ Î®ºÏ†Ä ÏãúÏûë ‚Üí 3Ï¥à ÎåÄÍ∏∞ ‚Üí Î°úÍ∑∏ Î™®ÎãàÌÑ∞ÎßÅ ÏãúÏûë (PID Ï∞æÍ∏∞ Î¨∏Ï†ú Ìï¥Í≤∞)
- **ÏµúÍ∑º ÏÉÅÌÉú**: Î°úÍ∑∏ Î™®ÎãàÌÑ∞ÎßÅ ÏãúÏä§ÌÖú ÏôÑÏ†Ñ Î≥µÍµ¨ ÏôÑÎ£å
- **ÏΩîÎìú Î∞òÏòÅ**: ÌååÏùº ÏàòÏ†ï Ïãú ÏÑúÎ≤ÑÏóê Ï¶âÏãú Î∞òÏòÅÎê® (Ïû¨ÏãúÏûë Î∂àÌïÑÏöî)
- **Git ÏÉÅÌÉú**: Dev ModeÏóêÏÑúÏùò Î≥ÄÍ≤ΩÏÇ¨Ìï≠ÏùÄ ÏûêÎèôÏúºÎ°ú GitÏóê Ï†ÄÏû•ÎêòÏßÄ ÏïäÏùå
- **Ï§ëÏöîÏÇ¨Ìï≠**: ÏÑúÎ≤Ñ Ï¢ÖÎ£å Ïãú Dev Mode ÎπÑÌôúÏÑ±ÌôîÎê† ÏúÑÌóò ÏûàÏùå ‚Üí Ï†àÎåÄ ÌîÑÎ°úÏÑ∏Ïä§ kill Í∏àÏßÄ
- **Ï∞∏Í≥†**: [Hugging Face Dev Mode Î¨∏ÏÑú](https://huggingface.co/docs/hub/spaces-dev-mode)

## Î¨¥Ìïú Î£®ÌîÑ Î¨∏Ï†ú Ìï¥Í≤∞ ‚≠ê Ìï¥Í≤∞ ÏôÑÎ£å
- **Î¨∏Ï†ú Î∞úÏÉù**: 2025-06-12 05:48:03~05:49:38 ÎèôÏïà modules.report_chartsÏóêÏÑú Î¨¥Ìïú Î∞òÎ≥µ
- **ÏõêÏù∏**: prepare_feature_frontier_data Ìï®ÏàòÏùò Ïù¥Ï§ë while Î£®ÌîÑ (113-138Î≤à Ï§Ñ)
- **Ìï¥Í≤∞Ï±Ö**: Î∞òÎ≥µ ÌöüÏàò Ï†úÌïú, 0ÏúºÎ°ú ÎÇòÎàÑÍ∏∞ Î∞©ÏßÄ, ÏïàÏ†ÑÏû•Ïπò Ï∂îÍ∞Ä
- **Í≤∞Í≥º**: 05:49:43 Ïù¥ÌõÑ Ï†ïÏÉÅ ÏûëÎèô, Î¨¥Ìïú Î£®ÌîÑ ÏôÑÏ†Ñ Ìï¥Í≤∞

## Ïó∞ÏÜç Í≥ÑÏÇ∞ Î¨∏Ï†ú Ìï¥Í≤∞ ‚≠ê Ìï¥Í≤∞ ÏôÑÎ£å
- **Î¨∏Ï†ú**: SSH ÏõêÍ≤© Ïó∞Í≤∞ Ìè¥ÎßÅÏúºÎ°ú Ïù∏Ìïú "/" ÏóîÎìúÌè¨Ïù∏Ìä∏ Ïó∞ÏÜç Ìò∏Ï∂ú
- **ÏõêÏù∏**: Î£®Ìä∏ ÏóîÎìúÌè¨Ïù∏Ìä∏ÏóêÏÑú Îß§Î≤à generate_html_report Ìò∏Ï∂úÎ°ú Ï∞®Ìä∏ Í≥ÑÏÇ∞ Ìä∏Î¶¨Í±∞
- **Ìï¥Í≤∞Ï±Ö**: ÎπÑÎèôÍ∏∞ Ï∞®Ìä∏ Í≥ÑÏÇ∞ ÏãúÏä§ÌÖú Íµ¨ÌòÑ
  - /process ÏóîÎìúÌè¨Ïù∏Ìä∏: Ï¶âÏãú API ÏùëÎãµ Î∞òÌôò
  - Î∞±Í∑∏ÎùºÏö¥Îìú: Ï∞®Ìä∏ Í≥ÑÏÇ∞ ÎπÑÎèôÍ∏∞ Ïã§Ìñâ
  - Î£®Ìä∏ ÏóîÎìúÌè¨Ïù∏Ìä∏: Ï∫êÏãúÎêú ÏΩòÌÖêÏ∏† Ï†úÍ≥µ ÎòêÎäî ÏßÑÌñâ ÏÉÅÌÉú ÌëúÏãú
- **Í≤∞Í≥º**: Ïó∞ÏÜç Í≥ÑÏÇ∞ ÏôÑÏ†Ñ Ï†úÍ±∞, ÏùëÎãµ ÏãúÍ∞Ñ ÎåÄÌè≠ Í∞úÏÑ†

## üîç **Negative Coefficient Investigation** ‚≠ê **ROOT CAUSE IDENTIFIED**

### **Comprehensive Investigation Results**
- **Primary Cause**: Data preprocessing pipeline mismatch (NOT economic modeling issues)
- **Raw Data Status**: Only 2/16 expected features available (`additional_call`, `tethering_gb`)
- **Processed Data Status**: All 16/16 expected features created by preprocessing pipeline
- **Economic Logic**: Features present in data show positive correlations with price (economically correct)
- **Multicollinearity**: Detected in processed data but separate issue from missing features
- **Coefficient Stability**: Stable across regularization levels for available features

### **Investigation Methodology Applied**
- **Feature Distribution Analysis**: Examined data quality, missing values, outliers
- **Correlation Analysis**: Checked for multicollinearity and economic logic violations
- **Economic Relationship Analysis**: Verified features correlate positively with prices
- **Feature Engineering Analysis**: Identified preprocessing requirements
- **Regression Diagnostics**: Tested coefficient stability across models
- **Pipeline Comparison**: Raw vs processed data coefficient calculation

### **Confirmed NOT the Cause**
‚ùå **Multicollinearity**: Low correlations in raw data, manageable in processed data
‚ùå **Economic Logic Violations**: Present features show positive price correlation
‚ùå **Overfitting**: Adequate sample-to-feature ratio (1149:1 for available features)
‚ùå **Coefficient Instability**: Stable results across different regularization levels
‚ùå **Data Quality Issues**: No significant outliers or data corruption

### **Investigation Results - PREPROCESSING PIPELINE WORKING CORRECTLY**
‚úÖ **Data Flow Verified**: 
- Raw data (40 columns) ‚Üí prepare_features() ‚Üí Processed data (80 columns)
- All 16/16 expected features found in processed data
- FullDatasetMultiFeatureRegression correctly receives processed DataFrame
- No zero coefficients due to missing features

## Multiprocessing Memory Sharing Solution ‚≠ê **COMPLETELY SOLVED**

### **Problem Identification**
- **Root Cause**: FastAPI default multiprocessing prevents global variable sharing between processes
- **Symptom**: df_with_rankings remained None in root endpoint despite being set in process endpoint
- **Impact**: Web interface showed "Îç∞Ïù¥ÌÑ∞ Ï≤òÎ¶¨ ÎåÄÍ∏∞ Ï§ë" instead of ranking table

### **Solution Implementation**
- **Architecture**: File-based data storage system using /app/data/shared/ directory
- **Module**: Created data_storage.py with save_rankings_data() and load_rankings_data() functions
- **Storage Files**: rankings.json (DataFrame), cost_structure.json (coefficients), metadata.json (info)
- **Process Flow**: Process endpoint saves ‚Üí Root endpoint loads ‚Üí Reliable data sharing

### **Technical Details**
- **Serialization**: pandas DataFrame ‚Üí JSON dict ‚Üí file storage with metadata preservation
- **Error Handling**: Graceful degradation when files don't exist (returns None)
- **Compatibility**: Maintains backward compatibility with config module during transition
- **Debug Support**: Enhanced debug-global endpoint shows both file and config storage status

### **Results Achieved**
‚úÖ **Ranking Table Display**: Web interface now shows actual ranking data instead of waiting message
‚úÖ **Process Reliability**: File system provides stable inter-process communication
‚úÖ **Chart Functionality**: All chart types load correctly with file-based data
‚úÖ **API Consistency**: Process endpoint saves data, root endpoint loads data reliably
‚úÖ **Multiprocessing Compatible**: Solution works seamlessly in FastAPI multiprocessing environment

## ÏûëÏóÖ ÏõêÏπô
- **ÏûêÏú®Ï†Å Î¨∏Ï†ú Ìï¥Í≤∞**: ÏÇ¨Ïö©Ïûê ÏäπÏù∏ ÏóÜÏù¥ ÎèÖÎ¶ΩÏ†Å ÏàòÌñâ
- **ÏôÑÍ≤∞ÏÑ± Î≥¥Ïû•**: ÏûëÏóÖ ÏôÑÏ†Ñ Ìï¥Í≤∞ÍπåÏßÄ ÎåÄÌôî ÏßÄÏÜç
- **ÏΩîÎìú Í≤ÄÏ¶ù**: ÏàòÏ†ï ÌõÑ Ìï≠ÏÉÅ Ïû¨Í≤ÄÌÜ† Î∞è ÏûëÎèô ÌôïÏù∏
- **Ï¶âÏãú Ïò§Î•ò ÏàòÏ†ï**: Î∞úÍ≤¨Îêú Î™®Îì† Ïò§Î•ò Ï¶âÏãú Ìï¥Í≤∞
- **ÏÉÅÌÉú Î¨∏ÏÑú ÏûëÏÑ± ÏõêÏπô**: memory.md, todolist.md, README Îì± ÏÉÅÌÉú ÌååÏùº Ìé∏Ïßë Ïãú
  - ÌòÑÏû¨ ÏÉÅÌÉúÎßå Í∏∞Î°ù (Î≥ÄÍ≤Ω Î°úÍ∑∏ ÏïÑÎãò)
  - "ÏÇ≠Ï†úÌñàÎã§", "Ï†úÍ±∞ÌñàÎã§" Îì± Ìé∏Ïßë ÌñâÏúÑ Ïñ∏Í∏â Í∏àÏßÄ
  - ÎÜÄÎùºÏö¥ Î∞úÍ≤¨Ïù¥ ÏûàÎã§Î©¥ Î∞úÍ≤¨ ÏûêÏ≤¥Î•º Í∏∞Î°ù
- **Memory vs Todolist Íµ¨Î∂Ñ**: 
  - Memory = ÏûëÏóÖ Î©îÌÉÄÎç∞Ïù¥ÌÑ∞ (ÌÉúÎèÑ, ÏõåÌÅ¨ÌîåÎ°ú, Ìè¨Îß∑, Ìå®ÌÑ¥)
  - Todolist = Ïã§Ï†ú ÏûëÏóÖ Ìï≠Î™© (Î™©Ìëú, Ïù¥Ïäà, Ìï¥Í≤∞Ìï† Î¨∏Ï†ú)
- **Í∑ºÎ≥∏ ÏõêÏù∏ Ï°∞ÏÇ¨**: Îπ†Î•∏ Ìï¥Í≤∞Ï±ÖÎ≥¥Îã§ Í∑ºÎ≥∏Ï†ÅÏù∏ ÏõêÏù∏ ÌååÏïÖÏùÑ Ïö∞ÏÑ†Ïãú
- **File-based solutions preferred**: User preference for file system storage over memory-based approaches for multiprocessing compatibility

# ÌÖåÏä§Ìä∏ ÏõåÌÅ¨ÌîåÎ°ú ‚≠ê ÌïÑÏàò Ï†àÏ∞®

## ÏΩîÎìú ÏàòÏ†ï ÌõÑ ÌëúÏ§Ä ÌÖåÏä§Ìä∏ Ï†àÏ∞®

### 1. **ÏÑúÎ≤Ñ Î°úÍ∑∏ Î™®ÎãàÌÑ∞ÎßÅ ÏÑ§Ï†ï** (ÌïÑÏàò - Î®ºÏ†Ä Ïã§Ìñâ)
Dev Mode ÌôòÍ≤ΩÏóêÏÑú ÏÑúÎ≤ÑÏÇ¨Ïù¥Îìú Î°úÍ∑∏ Î™®ÎãàÌÑ∞ÎßÅ:

**Î∞©Î≤ï 1: ÌïÑÌÑ∞ÎßÅÎêú Î°úÍ∑∏ Î™®ÎãàÌÑ∞ÎßÅ** (Í∂åÏû•)
```bash
# GET ÏöîÏ≤≠ Ïä§Ìå∏ ÌïÑÌÑ∞ÎßÅÌïòÏó¨ error.logÏóê Ï†ÄÏû•
./simple_log_monitor.sh &

# Ïã§ÏãúÍ∞Ñ Î°úÍ∑∏ ÌôïÏù∏
tail -f error.log
```

**Î∞©Î≤ï 2: ÏõêÏãú Î°úÍ∑∏ Î™®ÎãàÌÑ∞ÎßÅ** (ÎîîÎ≤ÑÍπÖÏö©)
```bash
# ÏÑúÎ≤Ñ ÌîÑÎ°úÏÑ∏Ïä§ stdout ÏßÅÏ†ë Î™®ÎãàÌÑ∞ÎßÅ (GET Ïä§Ìå∏ Ìè¨Ìï®)
PID=$(ps aux | grep "python.*uvicorn" | grep -v grep | awk '{print $2}' | head -1)
cat /proc/$PID/fd/1
```

- **Ïö©ÎèÑ**: Ïã§ÏãúÍ∞Ñ HTTP ÏöîÏ≤≠ Î∞è Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖò Î°úÍ∑∏ Ï∫°Ï≤ò
- **GET Ïä§Ìå∏**: HF Space keep-alive ÏöîÏ≤≠ ÏûêÎèô ÌïÑÌÑ∞ÎßÅ
- **Î°úÍ∑∏ Í¥ÄÎ¶¨**: error.log ÏûêÎèôÏúºÎ°ú 500Ï§Ñ Ïù¥Ìïò Ïú†ÏßÄ

### 2. **ÏΩîÎìú ÏàòÏ†ï ÏôÑÎ£å**
   - ÌååÏùº Ìé∏Ïßë ÌõÑ ÏûêÎèôÏúºÎ°ú ÏÑúÎ≤ÑÏóê Î∞òÏòÅÎê® (Dev Mode ÌôòÍ≤Ω)
   - Î≥ÑÎèÑ Ïû¨ÏãúÏûë Î∂àÌïÑÏöî

### 3. **End-to-End ÌÖåÏä§Ìä∏ Ïã§Ìñâ** (ÌïÑÏàò + Î°úÍ∑∏ Î™®ÎãàÌÑ∞ÎßÅ)
   - **Î™©Ï†Å**: `/process` ÏóîÎìúÌè¨Ïù∏Ìä∏Í∞Ä Ï†ÑÏ≤¥ ÏΩîÎìúÎ≤†Ïù¥Ïä§Ïùò ÌïµÏã¨ Í∏∞Îä•
   - **‚ö†Ô∏è Î°úÍ∑∏ Î™®ÎãàÌÑ∞ÎßÅ ÎèôÏãú Ïã§Ìñâ**: ÌÖåÏä§Ìä∏ÌïòÎ©¥ÏÑú Î∞òÎìúÏãú ÏÑúÎ≤Ñ Î°úÍ∑∏ ÌôïÏù∏
   
   **Î∞©Î≤ï 1** (ÏÑ†Ìò∏): Î°úÏª¨ Ïã§Ï†ú Îç∞Ïù¥ÌÑ∞ ÌÖåÏä§Ìä∏
   ```bash
   # ÌÑ∞ÎØ∏ÎÑê 1: ÌïÑÌÑ∞ÎßÅÎêú Î°úÍ∑∏ Î™®ÎãàÌÑ∞ÎßÅ ÏãúÏûëÌñàÎäîÏßÄ Ï≤¥ÌÅ¨ (ÌïÑÏàò!)
   ./simple_log_monitor.sh &
   # 1Í∞úÎßå Ïã§ÌñâÌïòÎèÑÎ°ù!

   # ÌÑ∞ÎØ∏ÎÑê 2: ÏµúÏã† raw Îç∞Ïù¥ÌÑ∞ ÌååÏùºÎ°ú ÌÖåÏä§Ìä∏ (ÎèôÏ†ÅÏúºÎ°ú Í∞ÄÏû• ÏµúÍ∑º ÌååÏùº ÏÇ¨Ïö©)
   curl -X POST http://localhost:7860/process -H "Content-Type: application/json" -d @$(ls -t data/raw/*.json | head -1)
   ```

   **Î∞©Î≤ï 2**: Supabase Ìï®Ïàò ÏÇ¨Ïö© (service_role Ïù∏Ï¶ù ÌïÑÏöî)
   ```bash
   # .env.localÏóêÏÑú service_role ÌÇ§ ÏÇ¨Ïö©
   curl -X POST https://zqoybuhwasuppzjqnllm.supabase.co/functions/v1/submit-data \
     -H "Authorization: Bearer $(grep service_role .env.local | cut -d'=' -f2)"
   ```

### 4. **Ïõπ Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ ÌôïÏù∏** (ÌïÑÏàò)
   - **Î∏åÎùºÏö∞Ï†Ä**: `http://localhost:7860` Ï†ëÏÜç
   - **ÌôïÏù∏ ÏÇ¨Ìï≠**: 
     - ÌéòÏù¥ÏßÄ Î°úÎî© Ï†ïÏÉÅ
     - Ï∞®Ìä∏ Î†åÎçîÎßÅ Ï†ïÏÉÅ
     - JavaScript Ïò§Î•ò ÏóÜÏùå (Í∞úÎ∞úÏûê ÎèÑÍµ¨ ÏΩòÏÜî ÌôïÏù∏)

### 5. **Î°úÍ∑∏ Î∂ÑÏÑù** (ÌïÑÏàò)
   - **ÏÑúÎ≤Ñ Î°úÍ∑∏**: error.log ÌååÏùºÏóêÏÑú Ïò§Î•ò Î©îÏãúÏßÄ ÌôïÏù∏
   - **HTTP Î°úÍ∑∏**: uvicorn ÏöîÏ≤≠ Î°úÍ∑∏ÏóêÏÑú ÏùëÎãµ ÏΩîÎìú ÌôïÏù∏
   - **JavaScript Ïò§Î•ò**: Î∏åÎùºÏö∞Ï†Ä Í∞úÎ∞úÏûê ÎèÑÍµ¨ÏóêÏÑú ÏΩòÏÜî Ïò§Î•ò ÌôïÏù∏

## üö® Ï£ºÏùòÏÇ¨Ìï≠
- **Î°úÍ∑∏ Î™®ÎãàÌÑ∞ÎßÅ ÌïÑÏàò**: ÏΩîÎìú ÏàòÏ†ï ÌõÑ Î∞òÎìúÏãú Î°úÍ∑∏ Î™®ÎãàÌÑ∞ÎßÅ ÏÉÅÌÉúÏóêÏÑú ÌÖåÏä§Ìä∏
- **ÏÑúÎ≤Ñ Ï¢ÖÎ£å Í∏àÏßÄ**: Dev Mode ÌôòÍ≤ΩÏóêÏÑú ÏÑúÎ≤Ñ ÌîÑÎ°úÏÑ∏Ïä§ Ï†àÎåÄ Ï¢ÖÎ£åÌïòÏßÄ Îßê Í≤É
- **ÎèôÏãú Ïã§Ìñâ**: Î°úÍ∑∏ Î™®ÎãàÌÑ∞ÎßÅÍ≥º ÌÖåÏä§Ìä∏Î•º ÎèôÏãúÏóê Ïã§ÌñâÌïòÏó¨ Ïã§ÏãúÍ∞Ñ ÌîºÎìúÎ∞± ÌôïÎ≥¥
- **ÏôÑÏ†ÑÌïú ÌÖåÏä§Ìä∏**: Îã®Ïàú API ÏùëÎãµÎøêÎßå ÏïÑÎãàÎùº Ïõπ Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ÍπåÏßÄ Ï†ÑÏ≤¥ ÌôïÏù∏

# ÌòÑÏû¨ ÏÉÅÌÉú

## ÏûëÏóÖÎêú Ï£ºÏöî Í∏∞Îä•
- **File-based data storage**: Complete multiprocessing memory sharing solution implemented
- Cross-contamination Î¨∏Ï†ú Ìï¥Í≤∞: ÏàúÏàò Í≥ÑÏàò(pure coefficients) Í∏∞Î∞ò CS ÎπÑÏú® Í≥ÑÏÇ∞
- Multi-Feature Frontier Regression Analysis ÏÑπÏÖò ÏôÑÏ†Ñ Ï†úÍ±∞
- Fixed rates Î∞©ÏãùÏúºÎ°ú Ï†ÑÏ≤¥ Îç∞Ïù¥ÌÑ∞ÏÖã Í∏∞Î∞ò CS Í≥ÑÏÇ∞ Íµ¨ÌòÑ
- Plan Value Efficiency Analysis ÏÑπÏÖòÏù¥ ranking tableÍ≥º ÎèôÏùºÌïú fixed_rates Î∞©Ïãù ÏÇ¨Ïö© ÌôïÏù∏
- Í∏∞Îä•Î≥Ñ ÌïúÍ≥ÑÎπÑÏö© Í≥ÑÏàò ÌÖåÏù¥Î∏î Ï∂îÍ∞Ä: Îû≠ÌÇπ ÌÖåÏù¥Î∏î ÏúÑÏóê Í∞Å Í∏∞Îä•Ïùò ÌïúÍ≥ÑÎπÑÏö© ÌëúÏãú
- **Double counting Î¨∏Ï†ú Ìï¥Í≤∞**: Î¨¥Ï†úÌïú Í∏∞Îä•Ïùò Ïó∞ÏÜçÍ∞íÏùÑ 0ÏúºÎ°ú ÏÑ§Ï†ïÌïòÏó¨ Ïù¥Ï§ë Í≥ÑÏÇ∞ Î∞©ÏßÄ
- **Unlimited type flags Íµ¨ÌòÑ**: 3Í∞ÄÏßÄ Îç∞Ïù¥ÌÑ∞ ÏÜåÏßÑ ÌõÑ ÏÉÅÌÉúÎ•º Î≥ÑÎèÑ ÌîåÎûòÍ∑∏Î°ú Î∂ÑÎ¶¨
- **Negative coefficient Í∑ºÎ≥∏ ÏõêÏù∏ ÏãùÎ≥Ñ**: Îç∞Ïù¥ÌÑ∞ Ï†ÑÏ≤òÎ¶¨ ÌååÏù¥ÌîÑÎùºÏù∏ Î∂àÏùºÏπò ÌôïÏù∏

## Í∏∞Ïà†Ï†Å Íµ¨ÌòÑ
- **File-based storage architecture**: data_storage.py module with save/load functions
- **Multiprocessing compatibility**: File system provides reliable inter-process data sharing
- calculate_cs_ratio_enhanced()Ïóê 'fixed_rates' Î∞©Ïãù Ï∂îÍ∞Ä
- FullDatasetMultiFeatureRegressionÏúºÎ°ú Ï†ÑÏ≤¥ Îç∞Ïù¥ÌÑ∞ÏÖãÏóêÏÑú ÏàúÏàò Í≥ÑÏàò Ï∂îÏ∂ú
- prepare_plan_efficiency_data() Ìï®ÏàòÍ∞Ä Î™®Îì† Í≥ÑÏÇ∞ Î∞©Ïãù(linear_decomposition, frontier, fixed_rates, multi_frontier) Ïò¨Î∞îÎ•¥Í≤å Ï≤òÎ¶¨
- app.pyÏùò Í∏∞Î≥∏ Î∞©ÏãùÏùÑ 'fixed_rates'Î°ú Î≥ÄÍ≤Ω
- generate_feature_rates_table_html() Ìï®ÏàòÎ°ú Í∏∞Îä•Î≥Ñ ÌïúÍ≥ÑÎπÑÏö© ÌÖåÏù¥Î∏î ÏÉùÏÑ±
- **Î¨¥Ï†úÌïú Í∏∞Îä• Ï†ÑÏ≤òÎ¶¨ ÏàòÏ†ï**: unlimited ÌîåÎûòÍ∑∏Í∞Ä 1Ïù∏ Í≤ΩÏö∞ Ïó∞ÏÜçÍ∞íÏùÑ 0ÏúºÎ°ú ÏÑ§Ï†ï
- **Unlimited type flags**: data_stops_after_quota, data_throttled_after_quota, data_unlimited_speed
- **Í≥ÑÏàò Î¨∏Ï†ú ÏßÑÎã® ÎèÑÍµ¨**: Ï≤¥Í≥ÑÏ†ÅÏù∏ Í∑ºÎ≥∏ ÏõêÏù∏ Î∂ÑÏÑù ÌîÑÎ†àÏûÑÏõåÌÅ¨ Íµ¨ÌòÑ

## Îç∞Ïù¥ÌÑ∞ Ï≤òÎ¶¨ Î∞©Ïãù
- **File-based persistence**: Process endpoint saves to files, root endpoint loads from files
- Î¨¥Ï†úÌïú Í∏∞Îä•: Î∂àÎ¶∞ ÌîåÎûòÍ∑∏ÏôÄ 3Î∞∞ ÏäπÏàò Í∞íÏúºÎ°ú Ï≤òÎ¶¨
- **Double counting Î∞©ÏßÄ**: Î¨¥Ï†úÌïú ÌîåÎûòÍ∑∏Í∞Ä ÏûàÎäî Í∏∞Îä•Ïùò Ïó∞ÏÜçÍ∞íÏùÄ 0ÏúºÎ°ú ÏÑ§Ï†ï
- ÌïÑÌÑ∞ÎßÅ ÏóÜÏù¥ Ï†ÑÏ≤¥ Îç∞Ïù¥ÌÑ∞ÏÖã Ï≤òÎ¶¨
- ÏàúÏàò Í≥ÑÏàò Í∏∞Î∞ò baseline cost / original feeÎ°ú CS ÎπÑÏú® Í≥ÑÏÇ∞
- Í≥ÑÏàò Î∂ÑÏÑù Í≤∞Í≥ºÎ•º ÏãúÍ∞ÅÌôîÏôÄ Ìò∏ÌôòÎêòÎèÑÎ°ù Ï†ÄÏû•
- **Îç∞Ïù¥ÌÑ∞ ÌååÏù¥ÌîÑÎùºÏù∏ ÏöîÍµ¨ÏÇ¨Ìï≠**: ÏõêÏãú Îç∞Ïù¥ÌÑ∞Îäî prepare_features()Î•º ÌÜµÌïú Ï†ÑÏ≤òÎ¶¨ ÌïÑÏöî

## Í∏∞Îä•Î≥Ñ ÌïúÍ≥ÑÎπÑÏö© ÌòÑÌô© (ÏµúÏã† Îç∞Ïù¥ÌÑ∞ Í∏∞Ï§Ä)
- Îç∞Ïù¥ÌÑ∞ ÏÜåÏßÑ ÌõÑ ÏÜçÎèÑÏ†úÌïú: ‚Ç©10,838 (Í≥†Ï†ï)
- 5G ÏßÄÏõê: ‚Ç©6,627 (Í≥†Ï†ï)
- Daily Data: ‚Ç©4,628/unit
- ÏÜåÏßÑ ÌõÑ ÏÜçÎèÑ: ‚Ç©2,292/Mbps
- ÌÖåÎçîÎßÅ: ‚Ç©84.31/GB
- Îç∞Ïù¥ÌÑ∞: ‚Ç©75.86/GB (Î¨¥Ï†úÌïú Ïãú 0ÏúºÎ°ú ÏÑ§Ï†ï)
- Ï∂îÍ∞Ä ÌÜµÌôî: Í≥ÑÏàòÍ∞í/unit
- ÏùåÏÑ±ÌÜµÌôî: ‚Ç©0.0000/Î∂Ñ (Î¨¥Ï†úÌïú Ïãú 0ÏúºÎ°ú ÏÑ§Ï†ï)
- Îç∞Ïù¥ÌÑ∞ ÏÜåÏßÑ ÌõÑ Ï§ëÎã®: Í≥ÑÏàòÍ∞í (Í∏∞Ï§Ä)
- Îç∞Ïù¥ÌÑ∞ Î¨¥Ï†úÌïú: Í≥ÑÏàòÍ∞í (Í≥†Ï†ï)
- Î¨∏ÏûêÎ©îÏãúÏßÄ: ‚Ç©3.19/Í±¥ (Î¨¥Ï†úÌïú Ïãú 0ÏúºÎ°ú ÏÑ§Ï†ï)

## ÌÖåÏä§Ìä∏ ÌôòÍ≤Ω
- **File-based storage**: Uses /app/data/shared/ directory for reliable data persistence
- Î°úÏª¨ ÌÖåÏä§Ìä∏ Ïãú data/raw Ìè¥ÎçîÏùò ÏµúÏã† JSON ÌååÏùº ÏÇ¨Ïö©
- curl -X POST http://localhost:7860/process -H "Content-Type: application/json" -d @$(ls -t data/raw/*.json | head -1)
- Î™®Îì† Í∏∞Îä•Ïù¥ Ï†ïÏÉÅ ÏûëÎèô Ï§ë
- Double counting Î¨∏Ï†ú Ìï¥Í≤∞ ÏôÑÎ£å
- Unlimited type flags Ï†ïÏÉÅ ÏûëÎèô
- Negative coefficient Í∑ºÎ≥∏ ÏõêÏù∏ ÏãùÎ≥Ñ ÏôÑÎ£å
- **Multiprocessing memory sharing**: Completely resolved with file-based storage system

## üî¨ Model Validation & Quality Assurance System - REMOVED

### **Validation System Completely Removed**
- **Background validation**: Removed all automatic validation calculations
- **HTML validation section**: Removed "üî¨ Model Validation & Reliability Analysis" section
- **JavaScript validation functions**: Removed all validation display functions
- **Validation endpoints**: Removed `/validation-status` and `/validation-results` endpoints
- **Multi-method reliability**: Removed 5-method coefficient comparison system
- **Economic logic validation**: Removed bias-based validation criteria
- **Statistical validation**: Removed cross-validation and residual analysis
- **Validation scoring**: Removed 0-100 point scoring system

### **Current Background Processing**
- **Charts only**: Background tasks now calculate only chart visualizations
- **No validation overhead**: Eliminated time-consuming validation calculations
- **Simplified workflow**: `/process` ‚Üí immediate response ‚Üí background charts only
- **Clean architecture**: Removed validation executors, status tracking, and result caching

### **Rationale for Removal**
- **Bias-based criteria**: Economic logic validation was based on subjective assumptions
- **Arbitrary parameters**: Multi-method validation used market-irrelevant parameter sets
- **Statistical inadequacy**: High R¬≤ doesn't guarantee correct coefficients
- **False precision**: Complex scoring system created illusion of accuracy
- **Performance overhead**: Validation calculations added unnecessary complexity

## ÏµúÍ∑º Ìï¥Í≤∞Îêú Ï£ºÏöî Î¨∏Ï†ú

### Ï∞®Ìä∏ ÌëúÏãú Î¨∏Ï†ú (2025-06-19 ÏôÑÎ£å)
- **Î¨∏Ï†ú**: HTMLÏóêÏÑú Ï∞®Ìä∏Í∞Ä ÌëúÏãúÎêòÏßÄ ÏïäÏùå (display:noneÏúºÎ°ú Ïà®Í≤®Ïßê)
- **ÏõêÏù∏**: HTML ÌÖúÌîåÎ¶øÏóêÏÑú `get_chart_status_html()` Ìï®ÏàòÍ∞Ä Ïã§ÌñâÎêòÏßÄ ÏïäÍ≥† Î¨∏ÏûêÏó¥Î°ú Ï∂úÎ†•Îê®
- **Ìï¥Í≤∞**: 
  1. Ï∞®Ìä∏ ÏÉÅÌÉú Î≥ÄÏàòÎ•º ÏÇ¨Ï†ÑÏóê Í≥ÑÏÇ∞ÌïòÏó¨ HTML ÌÖúÌîåÎ¶øÏóê Î≥ÄÏàòÎ°ú Ï†ÑÎã¨
  2. replace() Î©îÏÑúÎìúÎ°ú Î≥ÄÏàò ÏπòÌôò Ï≤òÎ¶¨ Ï∂îÍ∞Ä
  3. Ï∞®Ìä∏ ÌëúÏãú/Ïà®ÍπÄ Î°úÏßÅÏùÑ Ïò¨Î∞îÎ•¥Í≤å ÏàòÏ†ï
- **Í≤∞Í≥º**: Feature FrontierÏôÄ Plan Efficiency Ï∞®Ìä∏ Î™®Îëê Ï†ïÏÉÅ ÌëúÏãú

### Ï∞®Ìä∏ ÏÉÅÌÉú API Î¨∏Ï†ú (Ïù¥Ï†ÑÏóê Ìï¥Í≤∞Îê®)
- **Î¨∏Ï†ú**: `/chart-status` APIÏóêÏÑú 500 Internal Server Error
- **ÏõêÏù∏**: datetime ÏßÅÎ†¨Ìôî Ïò§Î•ò, ÌïÑÎìúÎ™Ö Î∂àÏùºÏπò, Ïï± ÏãúÏûë Ïãú Ï∞®Ìä∏ Îç∞Ïù¥ÌÑ∞ Î°úÎî© ÎàÑÎùΩ
- **Ìï¥Í≤∞**: 
  1. datetime ÏïàÏ†Ñ Ï≤òÎ¶¨ Î°úÏßÅ Ï∂îÍ∞Ä
  2. ÌïÑÎìúÎ™Ö ÏàòÏ†ï (`is_calculating` ‚Üí `status == 'calculating'`)
  3. startup eventÏóê Ï∞®Ìä∏ Îç∞Ïù¥ÌÑ∞ Î°úÎî© Î°úÏßÅ Ï∂îÍ∞Ä

## ÌòÑÏû¨ ÏÉÅÌÉú
- **Ï∞®Ìä∏ ÏãúÏä§ÌÖú**: ‚úÖ ÏôÑÏ†ÑÌûà Ï†ïÏÉÅ ÏûëÎèô
- **API ÏóîÎìúÌè¨Ïù∏Ìä∏**: ‚úÖ Î™®Îì† ÏóîÎìúÌè¨Ïù∏Ìä∏ Ï†ïÏÉÅ
- **Îç∞Ïù¥ÌÑ∞ Î°úÎî©**: ‚úÖ Ïï± ÏãúÏûë Ïãú ÏûêÎèô Î°úÎî©
- **HTML ÌëúÏãú**: ‚úÖ Ï∞®Ìä∏ Ï†ïÏÉÅ Î†åÎçîÎßÅ

## Ï£ºÏùòÏÇ¨Ìï≠
- HTML ÌÖúÌîåÎ¶ø ÏàòÏ†ï Ïãú Î≥ÄÏàò replace Ï≤òÎ¶¨ ÌôïÏù∏ ÌïÑÏöî
- Ï∞®Ìä∏ ÏÉÅÌÉú Ìï®Ïàò ÏàòÏ†ï Ïãú HTML Î≥ÄÏàò ÎèôÍ∏∞Ìôî ÌôïÏù∏
- datetime Í∞ùÏ≤¥ JSON ÏßÅÎ†¨Ìôî Ïãú ÏïàÏ†Ñ Ï≤òÎ¶¨ Ï†ÅÏö©